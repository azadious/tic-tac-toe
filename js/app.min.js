function AbstractSideTurn(){}function BoardFactory(element){this.target=element,this.humanTurn=new HumanTurn,this.computerTurn=new ComputerTurn}function ComputerTurn(){AbstractSideTurn.call(this)}function HumanTurn(){AbstractSideTurn.call(this)}AbstractSideTurn.prototype.marker="",AbstractSideTurn.prototype.side="",AbstractSideTurn.prototype.sideName="",AbstractSideTurn.prototype.checkWinner=function(pointer,side){return pointer[0]==side&&pointer[1]==side&&pointer[2]==side?this.callbackWinnerAction(side):pointer[3]==side&&pointer[4]==side&&pointer[5]==side?this.callbackWinnerAction(side):pointer[6]==side&&pointer[7]==side&&pointer[8]==side?this.callbackWinnerAction(side):pointer[0]==side&&pointer[3]==side&&pointer[6]==side?this.callbackWinnerAction(side):pointer[1]==side&&pointer[4]==side&&pointer[7]==side?this.callbackWinnerAction(side):pointer[2]==side&&pointer[5]==side&&pointer[8]==side?this.callbackWinnerAction(side):pointer[0]==side&&pointer[4]==side&&pointer[8]==side?this.callbackWinnerAction(side):pointer[2]==side&&pointer[4]==side&&pointer[6]==side?this.callbackWinnerAction(side):!1},AbstractSideTurn.prototype.drawMarker=function(el){el.html(this.marker)},AbstractSideTurn.prototype.callbackWinnerAction=function(){return alert(this.sideName+" Win"),!0},BoardFactory.prototype.humanTurn,BoardFactory.prototype.computerTurn,BoardFactory.prototype.target="",BoardFactory.prototype.isProcess=0,BoardFactory.prototype.turnNumber=0,BoardFactory.prototype.pointer=[0,0,0,0,0,0,0,0,0],BoardFactory.prototype.markPointer=function(el){var indexPointer=el.index("td");if(0==this.pointer[indexPointer]&&0==this.isProcess){if(this.isProcess=1,this.pointer[indexPointer]=this.humanTurn.side,this.humanTurn.drawMarker(el),result=this.humanTurn.checkWinner(this.pointer,this.humanTurn.side))return void this.resetGame();if(this.turnNumber=this.turnNumber+1,computerMarkerIndex=this.computerTurn.chooseBlock(this.pointer,this.turnNumber),Number.isInteger(computerMarkerIndex)){if(this.pointer[computerMarkerIndex]=this.computerTurn.side,this.computerTurn.drawMarker($("td").eq(computerMarkerIndex)),result=this.computerTurn.checkWinner(this.pointer,this.computerTurn.side))return void this.resetGame();this.turnNumber=this.turnNumber+1,this.isProcess=0}}else alert("Bot say: don't cheat :p"),console.log(this.pointer)},BoardFactory.prototype.resetGame=function(){this.pointer=[0,0,0,0,0,0,0,0,0],this.isProcess=0,this.turnNumber=0,$("td").html("")},ComputerTurn.prototype=new AbstractSideTurn,ComputerTurn.prototype.constructor=ComputerTurn,ComputerTurn.prototype.sideName="Computer",ComputerTurn.prototype.side="c",ComputerTurn.prototype.marker='<i class="fa fa-times"></i>',ComputerTurn.prototype.chooseBlock=function(pointer){for(var i=(this.side,pointer.length,0);i<pointer.length;i++)if(indexPointer=_.random(0,pointer.length),0==pointer[indexPointer])return indexPointer},ComputerTurn.prototype.genPointer=function(pointer,index,side){return 0==pointer[index]?(pointer[index]=side,pointer):!1},HumanTurn.prototype=new AbstractSideTurn,HumanTurn.prototype.constructor=HumanTurn,HumanTurn.prototype.sideName="Human",HumanTurn.prototype.side="h",HumanTurn.prototype.marker='<i class="fa fa-circle-o"></i>';